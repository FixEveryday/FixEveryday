<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FixEveryday - Home Services</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind CDN for quick styling -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  <!-- NAVBAR -->
  <header class="bg-white shadow-sm sticky top-0 z-20">
    <div class="max-w-5xl mx-auto flex items-center justify-between px-4 py-3">
      <div id="logo-click-area" class="flex items-center gap-2 cursor-pointer select-none">
        <div class="w-9 h-9 rounded-xl bg-red-600 flex items-center justify-center text-white font-bold text-lg">
          FE
        </div>
        <div>
          <div class="font-semibold text-lg">FixEveryday</div>
          <div class="text-xs text-slate-500">Premium Home Services</div>
        </div>
      </div>
      <a
        href="#booking"
        class="hidden sm:inline-flex px-4 py-2 rounded-full text-sm font-medium bg-red-600 text-white hover:bg-red-700 transition"
      >
        Book a Service
      </a>
    </div>
  </header>

  <!-- HERO -->
  <section class="bg-gradient-to-br from-red-600 via-red-500 to-red-700 text-white">
    <div class="max-w-5xl mx-auto px-4 py-10 sm:py-14 grid gap-8 sm:grid-cols-2 items-center">
      <div>
        <h1 class="text-3xl sm:text-4xl font-bold leading-tight">
          Trusted home services in
          <span class="underline decoration-white/70">Jamshedpur &amp; Bhubaneswar</span>
        </h1>
        <p class="mt-3 text-sm sm:text-base text-red-100">
          AC repair, electrician, plumber, cleaning, salon, cook, maid &amp; caretaker – all at your doorstep.
        </p>
        <div class="mt-4 flex flex-wrap gap-3">
          <a
            href="#booking"
            class="px-4 py-2.5 rounded-full bg-white text-red-700 font-semibold text-sm shadow-sm hover:bg-red-50 transition"
          >
            Book via form
          </a>
          <a
            id="whatsapp-link"
            href="https://wa.me/919999999999?text=Hi%20FixEveryday%2C%20I%20want%20to%20book%20a%20service."
            target="_blank"
            class="px-4 py-2.5 rounded-full border border-white/70 text-sm font-medium flex items-center gap-2 hover:bg-white/10 transition"
          >
            <span>Chat on WhatsApp</span>
          </a>
        </div>
        <p class="mt-3 text-xs text-red-100">
          Currently serving: Jamshedpur · Bhubaneswar · Cuttack · Rourkela
        </p>
      </div>
      <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-4 sm:p-5 border border-white/30 shadow-lg">
        <h2 class="font-semibold mb-3 text-sm uppercase tracking-wide text-red-100">
          Quick Highlights
        </h2>
        <ul class="space-y-2 text-sm">
          <li class="flex items-start gap-2">
            <span class="mt-1 w-1.5 h-1.5 rounded-full bg-lime-300"></span>
            <span>Verified &amp; trained professionals</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="mt-1 w-1.5 h-1.5 rounded-full bg-lime-300"></span>
            <span>Upfront pricing – no hidden charges</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="mt-1 w-1.5 h-1.5 rounded-full bg-lime-300"></span>
            <span>Support on WhatsApp for every booking</span>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- SERVICES -->
  <section class="max-w-5xl mx-auto px-4 py-8 sm:py-10">
    <div class="flex items-center justify-between gap-4 mb-4">
      <div>
        <h2 class="text-xl sm:text-2xl font-semibold">Popular Services</h2>
        <p class="text-xs sm:text-sm text-slate-500">
          These cards are fully controlled from the hidden admin panel.
        </p>
      </div>
    </div>
    <div
      id="services-grid"
      class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3"
    >
      <!-- Services from Firebase will be rendered here -->
      <div class="col-span-full text-center text-sm text-slate-500" id="services-empty">
        Loading services...
      </div>
    </div>
  </section>

  <!-- BOOKING FORM -->
  <section id="booking" class="bg-white border-t">
    <div class="max-w-5xl mx-auto px-4 py-8 sm:py-10 grid gap-8 sm:grid-cols-2">
      <div>
        <h2 class="text-xl sm:text-2xl font-semibold">Book a Service</h2>
        <p class="text-xs sm:text-sm text-slate-500 mt-1">
          Fill this form – we’ll confirm your booking on WhatsApp / phone.
        </p>
        <ul class="mt-4 space-y-2 text-xs sm:text-sm text-slate-600">
          <li>• Same-day or next-day slots (subject to availability)</li>
          <li>• Final price confirmed after understanding exact requirement</li>
          <li>• You can also directly WhatsApp us using the button above</li>
        </ul>
      </div>

      <form id="booking-form" class="bg-slate-50 border border-slate-200 rounded-2xl p-4 sm:p-5 space-y-3">
        <div>
          <label class="block text-xs font-medium text-slate-700 mb-1">Full Name</label>
          <input
            id="bf-name"
            type="text"
            required
            class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-500/70"
          />
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-slate-700 mb-1">Phone (WhatsApp)</label>
            <input
              id="bf-phone"
              type="tel"
              required
              class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-500/70"
            />
          </div>
          <div>
            <label class="block text-xs font-medium text-slate-700 mb-1">City</label>
            <select
              id="bf-city"
              required
              class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-500/70"
            >
              <option value="">Select</option>
              <option>Jamshedpur</option>
              <option>Bhubaneswar</option>
              <option>Cuttack</option>
              <option>Rourkela</option>
              <option>Other</option>
            </select>
          </div>
        </div>

        <div>
          <label class="block text-xs font-medium text-slate-700 mb-1">Full Address</label>
          <textarea
            id="bf-address"
            rows="2"
            required
            class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-500/70"
          ></textarea>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-slate-700 mb-1">Service</label>
            <select
              id="bf-service"
              required
              class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-500/70"
            >
              <option value="">Select</option>
              <!-- Options will also be filled from Firebase services -->
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-slate-700 mb-1">Preferred Date</label>
            <input
              id="bf-date"
              type="date"
              required
              class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-500/70"
            />
          </div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-slate-700 mb-1">Preferred Time</label>
            <input
              id="bf-time"
              type="time"
              required
              class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-500/70"
            />
          </div>
          <div>
            <label class="block text-xs font-medium text-slate-700 mb-1">Approx. Budget (optional)</label>
            <input
              id="bf-budget"
              type="text"
              placeholder="e.g. 800–1000"
              class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-500/70"
            />
          </div>
        </div>

        <div>
          <label class="block text-xs font-medium text-slate-700 mb-1">Extra Details (optional)</label>
          <textarea
            id="bf-notes"
            rows="2"
            class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-500/70"
          ></textarea>
        </div>

        <button
          type="submit"
          class="w-full inline-flex justify-center items-center px-4 py-2.5 rounded-lg bg-red-600 text-white text-sm font-semibold hover:bg-red-700 transition"
        >
          Submit Booking
        </button>

        <p id="booking-status" class="text-xs text-center mt-1 text-slate-500"></p>
      </form>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="border-t bg-slate-50">
    <div class="max-w-5xl mx-auto px-4 py-5 flex flex-col sm:flex-row items-center justify-between gap-2 text-xs text-slate-500">
      <p>© <span id="year"></span> FixEveryday. All rights reserved.</p>
      <p>Made for Jamshedpur &amp; Odisha homes.</p>
    </div>
  </footer>

  <!-- HIDDEN ADMIN PANEL (overlays on top when opened) -->
  <div
    id="admin-overlay"
    class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-40"
  >
    <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-[95%] max-h-[90vh] overflow-hidden flex flex-col">
      <div class="px-4 py-3 border-b flex items-center justify-between">
        <div>
          <h2 class="font-semibold text-sm">FixEveryday Admin Panel</h2>
          <p class="text-xs text-slate-500">
            Only visible for <strong>saumyaranjansahu0001@gmail.com</strong>
          </p>
        </div>
        <div class="flex items-center gap-2">
          <button
            id="admin-auth-btn"
            class="px-3 py-1.5 rounded-lg text-xs font-medium border border-slate-200"
          >
            Sign in with Google
          </button>
          <button
            id="admin-close"
            class="w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 text-sm"
          >
            ✕
          </button>
        </div>
      </div>

      <div class="flex-1 grid sm:grid-cols-[1.1fr,1fr] overflow-hidden">
        <!-- Left: Services management -->
        <div class="border-r overflow-y-auto">
          <div class="px-4 py-3 border-b bg-slate-50">
            <h3 class="font-medium text-sm">Services</h3>
            <p class="text-xs text-slate-500">
              Add / remove cards. Changes are live instantly.
            </p>
          </div>

          <div class="p-4 space-y-3">
            <form id="admin-add-service" class="space-y-2 bg-slate-50 border border-slate-200 rounded-xl p-3">
              <div class="grid grid-cols-2 gap-2">
                <div>
                  <label class="block text-[11px] font-medium text-slate-700 mb-0.5">Name</label>
                  <input
                    id="as-name"
                    type="text"
                    required
                    class="w-full rounded-lg border border-slate-300 px-2 py-1.5 text-xs outline-none focus:ring-2 focus:ring-red-500/70"
                  />
                </div>
                <div>
                  <label class="block text-[11px] font-medium text-slate-700 mb-0.5">Category (optional)</label>
                  <input
                    id="as-category"
                    type="text"
                    placeholder="AC, Salon, Cleaning..."
                    class="w-full rounded-lg border border-slate-300 px-2 py-1.5 text-xs outline-none focus:ring-2 focus:ring-red-500/70"
                  />
                </div>
              </div>

              <div>
                <label class="block text-[11px] font-medium text-slate-700 mb-0.5">Short description</label>
                <input
                  id="as-description"
                  type="text"
                  required
                  class="w-full rounded-lg border border-slate-300 px-2 py-1.5 text-xs outline-none focus:ring-2 focus:ring-red-500/70"
                />
              </div>

              <div class="grid grid-cols-2 gap-2">
                <div>
                  <label class="block text-[11px] font-medium text-slate-700 mb-0.5">Starting price (₹)</label>
                  <input
                    id="as-price"
                    type="number"
                    min="0"
                    step="50"
                    required
                    class="w-full rounded-lg border border-slate-300 px-2 py-1.5 text-xs outline-none focus:ring-2 focus:ring-red-500/70"
                  />
                </div>
                <div>
                  <label class="block text-[11px] font-medium text-slate-700 mb-0.5">Image URL (optional)</label>
                  <input
                    id="as-image"
                    type="url"
                    placeholder="https://..."
                    class="w-full rounded-lg border border-slate-300 px-2 py-1.5 text-xs outline-none focus:ring-2 focus:ring-red-500/70"
                  />
                </div>
              </div>

              <button
                type="submit"
                class="w-full inline-flex justify-center items-center px-3 py-1.5 rounded-lg bg-red-600 text-white text-xs font-semibold hover:bg-red-700 transition"
              >
                Add / Update Service
              </button>
              <p id="admin-service-status" class="text-[11px] text-slate-500 mt-1"></p>
            </form>

            <div>
              <h4 class="text-xs font-semibold mb-1.5">Current services</h4>
              <div id="admin-services-list" class="space-y-1.5 text-xs">
                <!-- filled from Firestore -->
                <p class="text-slate-500 text-[11px]">
                  No services yet. Add above to create your first card.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Right: Bookings -->
        <div class="overflow-y-auto">
          <div class="px-4 py-3 border-b bg-slate-50">
            <h3 class="font-medium text-sm">Bookings</h3>
            <p class="text-xs text-slate-500">
              New bookings appear in real-time.
            </p>
          </div>
          <div id="admin-bookings-list" class="p-3 space-y-2 text-xs">
            <p class="text-slate-500 text-[11px]">
              No bookings yet.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script>
    // Year in footer
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

  <!-- Firebase + App Logic -->
  <script type="module">
    // IMPORT FIREBASE SDK (CDN)
    // Docs: https://firebase.google.com/docs/web/alt-setup :contentReference[oaicite:0]{index=0}
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import {
      getAuth,
      GoogleAuthProvider,
      signInWithPopup,
      onAuthStateChanged,
      signOut
    } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
    import {
      getFirestore,
      collection,
      addDoc,
      onSnapshot,
      query,
      orderBy,
      deleteDoc,
      doc,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

    // TODO: ---- IMPORTANT ----
    // Replace everything inside firebaseConfig with your own config
    // from Firebase Console → Project Settings → "Your apps" → Web
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    const ADMIN_EMAIL = "saumyaranjansahu0001@gmail.com";

    // DOM elements
    const servicesGrid = document.getElementById("services-grid");
    const servicesEmpty = document.getElementById("services-empty");
    const bfService = document.getElementById("bf-service");
    const bookingForm = document.getElementById("booking-form");
    const bookingStatus = document.getElementById("booking-status");
    const whatsappLink = document.getElementById("whatsapp-link");

    const logoClickArea = document.getElementById("logo-click-area");
    const adminOverlay = document.getElementById("admin-overlay");
    const adminClose = document.getElementById("admin-close");
    const adminAuthBtn = document.getElementById("admin-auth-btn");
    const adminAddServiceForm = document.getElementById("admin-add-service");
    const adminServicesList = document.getElementById("admin-services-list");
    const adminBookingsList = document.getElementById("admin-bookings-list");
    const adminServiceStatus = document.getElementById("admin-service-status");

    let currentUser = null;
    let logoClickCount = 0;
    let logoClickTimer = null;

    // Hidden admin trigger: click logo 5 times within 8 seconds
    logoClickArea.addEventListener("click", () => {
      logoClickCount++;
      if (logoClickTimer) clearTimeout(logoClickTimer);
      logoClickTimer = setTimeout(() => {
        logoClickCount = 0;
      }, 8000);

      if (logoClickCount >= 5) {
        logoClickCount = 0;
        openAdmin();
      }
    });

    function openAdmin() {
      adminOverlay.classList.remove("hidden");
      adminOverlay.classList.add("flex");
      updateAdminUI();
    }

    function closeAdmin() {
      adminOverlay.classList.add("hidden");
      adminOverlay.classList.remove("flex");
    }

    adminClose.addEventListener("click", closeAdmin);

    adminOverlay.addEventListener("click", (e) => {
      if (e.target === adminOverlay) {
        closeAdmin();
      }
    });

    // Auth flow
    adminAuthBtn.addEventListener("click", async () => {
      if (currentUser) {
        // Already signed in – so sign out
        await signOut(auth);
        return;
      }
      try {
        const result = await signInWithPopup(auth, provider);
        const user = result.user;
        if (user.email !== ADMIN_EMAIL) {
          alert("This email is not allowed as admin.");
          await signOut(auth);
        }
      } catch (err) {
        console.error(err);
        alert("Login failed: " + err.message);
      }
    });

    onAuthStateChanged(auth, (user) => {
      currentUser = user;
      updateAdminUI();
    });

    function updateAdminUI() {
      if (!adminOverlay.classList.contains("flex")) return;

      if (!currentUser) {
        adminAuthBtn.textContent = "Sign in with Google";
        adminAddServiceForm.classList.add("pointer-events-none", "opacity-50");
        adminServiceStatus.textContent = "Sign in with Google using your admin email to edit services.";
        return;
      }

      if (currentUser.email !== ADMIN_EMAIL) {
        adminAuthBtn.textContent = "Wrong email – Sign out";
        adminAddServiceForm.classList.add("pointer-events-none", "opacity-50");
        adminServiceStatus.textContent = "Logged in with non-admin email. Sign out and login with the admin email.";
      } else {
        adminAuthBtn.textContent = "Sign out (" + currentUser.email + ")";
        adminAddServiceForm.classList.remove("pointer-events-none", "opacity-50");
        adminServiceStatus.textContent = "You are logged in as admin. Changes will apply instantly.";
      }
    }

    // Real-time services listener
    const servicesCol = collection(db, "services");
    onSnapshot(query(servicesCol, orderBy("createdAt", "asc")), (snapshot) => {
      const services = [];
      snapshot.forEach((docSnap) => {
        services.push({ id: docSnap.id, ...docSnap.data() });
      });
      renderServices(services);
      renderAdminServices(services);
    });

    function renderServices(services) {
      servicesGrid.innerHTML = "";
      bfService.innerHTML = '<option value="">Select</option>';

      if (!services.length) {
        servicesEmpty.classList.remove("hidden");
        servicesGrid.appendChild(servicesEmpty);
        return;
      }

      servicesEmpty.classList.add("hidden");

      services.forEach((s) => {
        // card
        const card = document.createElement("article");
        card.className =
          "rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden flex flex-col";

        const imgUrl =
          s.imageUrl ||
          "https://images.pexels.com/photos/3965545/pexels-photo-3965545.jpeg?auto=compress&cs=tinysrgb&w=800";

        card.innerHTML = `
          <div class="h-32 w-full bg-slate-200 overflow-hidden">
            <img src="${imgUrl}" alt="${s.name || ""}" class="w-full h-full object-cover" onerror="this.style.display='none'" />
          </div>
          <div class="p-3 flex-1 flex flex-col">
            <h3 class="font-semibold text-sm mb-0.5">${s.name || "Service"}</h3>
            ${
              s.category
                ? `<p class="text-[11px] uppercase tracking-wide text-red-500 mb-1">${s.category}</p>`
                : ""
            }
            <p class="text-xs text-slate-600 flex-1">${s.description || ""}</p>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-xs font-semibold text-slate-900">From ₹${s.startPrice || 0}</span>
              <button
                onclick="document.getElementById('bf-service').value='${s.name || ""}'; document.getElementById('booking').scrollIntoView({behavior:'smooth'})"
                class="px-3 py-1 rounded-full border border-red-600 text-[11px] text-red-600 hover:bg-red-600 hover:text-white transition"
              >
                Book
              </button>
            </div>
          </div>
        `;
        servicesGrid.appendChild(card);

        // booking dropdown
        const opt = document.createElement("option");
        opt.value = s.name || "";
        opt.textContent = s.name || "";
        bfService.appendChild(opt);
      });
    }

    // Render admin services list
    function renderAdminServices(services) {
      adminServicesList.innerHTML = "";
      if (!services.length) {
        adminServicesList.innerHTML =
          '<p class="text-slate-500 text-[11px]">No services yet. Use the form above to add.</p>';
        return;
      }

      services.forEach((s) => {
        const row = document.createElement("div");
        row.className =
          "flex items-start justify-between gap-2 border border-slate-200 rounded-lg px-2 py-1.5";
        row.innerHTML = `
          <div>
            <div class="font-semibold text-[11px]">${s.name || ""}</div>
            <div class="text-[11px] text-slate-500">${s.description || ""}</div>
            <div class="text-[11px] text-slate-500 mt-0.5">
              ${s.category ? `<span>${s.category}</span> · ` : ""}From ₹${s.startPrice || 0}
            </div>
          </div>
          <button
            class="text-[11px] text-red-600 hover:text-red-800"
            data-service-id="${s.id}"
          >
            Delete
          </button>
        `;
        adminServicesList.appendChild(row);
      });

      // delete buttons
      adminServicesList.querySelectorAll("button[data-service-id]").forEach((btn) => {
        btn.addEventListener("click", async () => {
          const id = btn.getAttribute("data-service-id");
          if (!confirm("Delete this service?")) return;
          try {
            await deleteDoc(doc(db, "services", id));
          } catch (err) {
            alert("Error deleting: " + err.message);
          }
        });
      });
    }

    // Add / update service
    adminAddServiceForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      if (!currentUser || currentUser.email !== ADMIN_EMAIL) {
        alert("You are not logged in as admin.");
        return;
      }

      const name = document.getElementById("as-name").value.trim();
      const category = document.getElementById("as-category").value.trim();
      const description = document.getElementById("as-description").value.trim();
      const startPrice = Number(document.getElementById("as-price").value || 0);
      const imageUrl = document.getElementById("as-image").value.trim();

      try {
        await addDoc(collection(db, "services"), {
          name,
          category,
          description,
          startPrice,
          imageUrl,
          createdAt: serverTimestamp()
        });
        adminServiceStatus.textContent = "Service saved.";
        adminAddServiceForm.reset();
        setTimeout(() => (adminServiceStatus.textContent = ""), 2000);
      } catch (err) {
        console.error(err);
        adminServiceStatus.textContent = "Error: " + err.message;
      }
    });

    // Booking submit
    bookingForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      bookingStatus.textContent = "Submitting...";
      bookingStatus.classList.remove("text-green-600", "text-red-600");
      bookingStatus.classList.add("text-slate-600");

      const payload = {
        name: document.getElementById("bf-name").value.trim(),
        phone: document.getElementById("bf-phone").value.trim(),
        city: document.getElementById("bf-city").value.trim(),
        address: document.getElementById("bf-address").value.trim(),
        serviceName: document.getElementById("bf-service").value.trim(),
        date: document.getElementById("bf-date").value,
        time: document.getElementById("bf-time").value,
        budget: document.getElementById("bf-budget").value.trim(),
        notes: document.getElementById("bf-notes").value.trim(),
        status: "new",
        createdAt: serverTimestamp()
      };

      try {
        await addDoc(collection(db, "bookings"), payload);
        bookingStatus.textContent =
          "Booking submitted. We will contact you shortly on WhatsApp / phone.";
        bookingStatus.classList.remove("text-slate-600");
        bookingStatus.classList.add("text-green-600");
        bookingForm.reset();
      } catch (err) {
        console.error(err);
        bookingStatus.textContent = "Error sending booking: " + err.message;
        bookingStatus.classList.remove("text-slate-600");
        bookingStatus.classList.add("text-red-600");
      }
    });

    // Admin: booking list
    const bookingsCol = collection(db, "bookings");
    onSnapshot(query(bookingsCol, orderBy("createdAt", "desc")), (snapshot) => {
      adminBookingsList.innerHTML = "";
      if (snapshot.empty) {
        adminBookingsList.innerHTML =
          '<p class="text-slate-500 text-[11px]">No bookings yet.</p>';
        return;
      }

      snapshot.forEach((docSnap) => {
        const b = docSnap.data();
        const item = document.createElement("div");
        item.className =
          "border border-slate-200 rounded-lg p-2.5 bg-white space-y-0.5";
        item.innerHTML = `
          <div class="flex justify-between items-center gap-2">
            <div class="font-semibold text-[11px]">${b.name || ""}</div>
            <div class="text-[11px] text-slate-500">${b.city || ""}</div>
          </div>
          <div class="text-[11px] text-slate-600">${b.serviceName || ""}</div>
          <div class="text-[11px] text-slate-500">
            ${b.date || ""} · ${b.time || ""} · ₹${b.budget || "N/A"}
          </div>
          <div class="text-[11px] text-slate-500">Phone: ${b.phone || ""}</div>
          <div class="text-[11px] text-slate-500">Address: ${b.address || ""}</div>
          ${
            b.notes
              ? `<div class="text-[11px] text-slate-500">Notes: ${b.notes}</div>`
              : ""
          }
        `;
        adminBookingsList.appendChild(item);
      });
    });
  </script>
</body>
</html>
